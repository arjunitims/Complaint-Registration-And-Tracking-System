<!DOCTYPE html>
 <html lang="en">
 <head> 
<meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Complaint Registration System</title> 
<style> 
* { margin: 0; 
padding: 0; 
box-sizing: border-box; 
} 
body {
 font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 min-height: 100vh; 
padding: 20px; 
} 
.container 
{ 
max-width: 800px; margin: 0 auto;
 }
 .header { 
text-align: center; 
color: white; 
margin-bottom: 30px; 
} 
.header h1 { 
font-size: 2.5em; 
margin-bottom: 10px; 
} 
.header p { 
font-size: 1.1em; 
opacity: 0.9; 
} 
.nav-buttons { 
display: flex; 
gap: 10px; 
justify-content: center; 
margin-bottom: 30px; 
} 
.nav-btn {
 background: white;
 color: #667eea; 
padding: 10px 20px; 
border: none; 
border-radius: 5px; 
cursor: pointer; 
font-size: 1em;
 text-decoration: none; transition: transform 0.2s; 
} 
.nav-btn:hover {
 transform: translateY(-2px); 
box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
} 
.card { 
background: white; 
border-radius: 15px; 
padding: 40px; 
box-shadow: 0 10px 30px rgba(0,0,0,0.2);
 } 
.form-group { 
margin-bottom: 20px; 
} 
label {
 display: block;
 margin-bottom: 5px; 
color: #333; 
font-weight: 600; 
} 
input, textarea, select { 
width: 100%; 
padding: 12px; 
border: 2px solid #e0e0e0; border-radius: 8px; 
font-size: 1em;
 transition: border-color 0.3s; background-color: white;
 } 
input:focus, textarea:focus, select:focus { 
outline: none; 
border-color: #667eea; 
} 
textarea {
 min-height: 120px; 
resize: vertical; 
} 
.submit-btn {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
color: white;
 padding: 15px 40px; 
border: none; 
border-radius: 8px; 
font-size: 1.1em; 
cursor: pointer;
 width: 100%;
 transition: transform 0.2s; 
} 
.submit-btn:hover { 
transform: translateY(-2px);
 box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); 
} 
.submit-btn:disabled 
{ 
opacity: 0.6; 
cursor: not-allowed;
 } 
.success-message {
 background: #d4edda; 
border: 1px solid #c3e6cb; 
color: #155724;
 padding: 15px;
 border-radius: 8px; 
margin-top: 20px; 
display: none; 
} 
.prediction-box {
 background: #f8f9fa; 
border-left: 4px solid #667eea; padding: 15px; 
margin-top: 20px; 
border-radius: 5px; 
display: none;
 } 
.prediction-item { 
margin: 8px 0; 
} 
.badge { 
display: inline-block; 
padding: 5px 12px; 
border-radius: 20px; 
font-size: 0.9em;
 font-weight: 600; 
} 
.badge-high { 
background: #dc3545; 
color: white; 
} 
.badge-medium { 
background: #ffc107;
 color: #000; 
} 
.badge-low { 
background: #28a745;
 color: white; 
} 
</style> 
</head> 
<body> 
<div class="container">
 <div class="header">
 <h1>Complaint Registration & Tracking System</h1>
 </div> 
<div class="nav-buttons"> 
<a href="/" class="nav-btn">Register Complaint</a> 
<a href="/dashboard" class="nav-btn">Track Complaints</a>
 <a href="/admin" class="nav-btn">Admin Panel</a> 
</div> 
<div class="card"> 
<h2 style="margin-bottom: 20px;">Register New Complaint</h2> 
<form id="complaintForm">
 <div class="form-group"> 
<label for="name">Full Name *</label> 
<input type="text" name="name" id="name" required> 
</div>
 <div class="form-group"> 
<label for="email">Email Address *</label> 
<input type="email" name="email" id="email"> 
</div> 
<div class="form-group"> 
<label for="phone">Phone Number</label> 
<input type="tel" id="phone" name="phone"> 
</div> 
<div class="form-group">
 <label for="category">Nature Of Complaint</label> 
<select name="category" id="category" required> 
 <option value="" disabled selected hidden>
        
    </option>
<option value="IT">IT</option> 
<option value="Electrical">Electrical</option> 
<option value="Civil">Civil</option> 
<option value="Plumbing">Plumbing</option> 
<option value="House Keeping">House Keeping</option> 
<option value="Furniture">Furniture</option> 
<option value="Telephone">Telephone</option> 
<option value="Others">Others</option> 
</select> 
</div> 
<div class="form-group"> 
<label for="complaint">Complaint Description *</label> <textarea id="complaint" name="complaint" required placeholder="Please describe your issue in detail..."></textarea> 
</div> 
<button type="submit" class="submit-btn" id="submitBtn">Submit Complaint</button> 
</form> 
<div class="success-message" id="successMessage"> <h3>Complaint Submitted Successfully!</h3>
 <div class="prediction-box" id="predictionBox" style="display: block; margin-top: 15px;"> 
<strong>Analysis Results:</strong>
 <div class="prediction-item"> <strong>Complaint ID:</strong> <span id="complaintId"></span> </div> 
<div class="prediction-item"> <strong>Priority:</strong> <span id="priority"></span> 
</div> 
<div class="prediction-item"> <strong>Estimated Resolution Time:</strong> <span id="resolutionTime"></span> </div> 
</div> 
</div> 
</div> 
</div> 
<script> 
document.getElementById('complaintForm').addEventListener('submit', async function(e) { 

e.preventDefault();
 const email = document.getElementById('email').value.trim(); 
const phone = document.getElementById('phone').value.trim(); 
if (!email && !phone) { 
alert("Please provide either Email or Phone Number"); 
return; 
} 
const submitBtn = document.getElementById('submitBtn'); 
submitBtn.disabled = true; submitBtn.textContent = 'Processing...'; 
const formData = { 
name: document.getElementById('name').value.trim(),
 email: document.getElementById('email').value.trim(), 
phone: document.getElementById('phone').value.trim(),
 category: document.getElementById('category').value.trim(), 
complaint: document.getElementById('complaint').value.trim() 
}; 
try {
 const response = await fetch('/api/submit_complaint', { 
method: 'POST', 
headers: { 'Content-Type': 'application/json' }, 
body: JSON.stringify(formData) 
}); 
const result = await response.json(); 
if (!response.ok || !result.success) {
            alert(result.error || "Submission failed");
            return;
        }

document.getElementById('successMessage').style.display = 'block'; document.getElementById('predictionBox').style.display = 'block'; document.getElementById('complaintId').textContent = result.complaint.id || "N/A";
document.getElementById('priority').textContent = result.complaint.priority || "N/A";
   document.getElementById('resolutionTime').textContent =
            (result.complaint.estimated_resolution_hours || "N/A") + " hours";
document.getElementById('complaintForm').reset();
 
} catch (err) {
        console.error("JS Error:", err);
        alert("Server connection error");
} finally {
 submitBtn.disabled = false;
 submitBtn.textContent = 'Submit Complaint';
 } 
});
 </script>
 </body> 
</html>